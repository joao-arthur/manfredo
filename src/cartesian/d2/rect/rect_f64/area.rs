use crate::cartesian::d2::{point::point_f64::delta, rect::rect_f64::Rect};

pub fn area(r: &Rect) -> f64 {
    let d = delta(&r.min, &r.max);
    d.x * d.y
}

#[cfg(test)]
mod tests {
    use super::area;
    use crate::cartesian::d2::{point::point_f64::MAX, rect::rect_f64::Rect};

    #[test]
    fn test_area() {
        assert_eq!(area(&Rect::of(-5.0, 0.0, 0.0, 2.0)), 10.0);
        assert_eq!(area(&Rect::of(-50.0, 50.0, -30.0, 51.0)), 20.0);
        assert_eq!(area(&Rect::of(10.0, -30.0, 15.0, -20.0)), 50.0);
    }

    #[test]
    fn area_powers_of_10() {
        assert_eq!(area(&Rect::of(0.0, 0.0, 1.0, 1.0)), 1.0);
        assert_eq!(area(&Rect::of(-5.0, -5.0, 5.0, 5.0)), 100.0);
        assert_eq!(area(&Rect::of(-50.0, -50.0, 50.0, 50.0)), 10000.0);
        assert_eq!(area(&Rect::of(-500.0, -500.0, 500.0, 500.0)), 1000000.0);
        assert_eq!(area(&Rect::of(-5000.0, -5000.0, 5000.0, 5000.0)), 100000000.0);
        assert_eq!(area(&Rect::of(-50000.0, -50000.0, 50000.0, 50000.0)), 10000000000.0);
        assert_eq!(area(&Rect::of(-500000.0, -500000.0, 500000.0, 500000.0)), 1000000000000.0);
        assert_eq!(area(&Rect::of(-5000000.0, -5000000.0, 5000000.0, 5000000.0)), 100000000000000.0);
        assert_eq!(area(&Rect::of(-50000000.0, -50000000.0, 50000000.0, 50000000.0)), 10000000000000000.0);
        assert_eq!(area(&Rect::of(-500000000.0, -500000000.0, 500000000.0, 500000000.0)), 1000000000000000000.0);
        assert_eq!(area(&Rect::of(-5000000000.0, -5000000000.0, 5000000000.0, 5000000000.0)), 100000000000000000000.0);
        assert_eq!(area(&Rect::of(-50000000000.0, -50000000000.0, 50000000000.0, 50000000000.0)), 10000000000000000000000.0);
        assert_eq!(area(&Rect::of(-500000000000.0, -500000000000.0, 500000000000.0, 500000000000.0)), 1000000000000000000000000.0);
        assert_eq!(area(&Rect::of(-5000000000000.0, -5000000000000.0, 5000000000000.0, 5000000000000.0)), 100000000000000000000000000.0);
        assert_eq!(area(&Rect::of(-50000000000000.0, -50000000000000.0, 50000000000000.0, 50000000000000.0)), 10000000000000000000000000000.0);
        assert_eq!(area(&Rect::of(-500000000000000.0, -500000000000000.0, 500000000000000.0, 500000000000000.0)), 1000000000000000000000000000000.0);
        assert_eq!(area(&Rect::of(-5000000000000000.0, -5000000000000000.0, 5000000000000000.0, 5000000000000000.0)), 100000000000000000000000000000000.0);
        assert_eq!(area(&Rect::of(-50000000000000000.0, -50000000000000000.0, 50000000000000000.0, 50000000000000000.0)), 10000000000000000000000000000000000.0);
        assert_eq!(area(&Rect::of(-500000000000000000.0, -500000000000000000.0, 500000000000000000.0, 500000000000000000.0)), 1000000000000000000000000000000000000.0);
        assert_eq!(area(&Rect::of(-5000000000000000000.0, -5000000000000000000.0, 5000000000000000000.0, 5000000000000000000.0)), 100000000000000000000000000000000000000.0);
    }

    #[test]
    fn area_bounds() {
        assert_eq!(area(&Rect::of(0.0, 0.0, 0.0, 0.0)), 0.0);
        assert_eq!(area(&Rect::of(-94906265.62425156, -94906265.62425155, 0.0, 0.0)), MAX + 1.0);
        assert_eq!(area(&Rect::of(0.0, 0.0, 94906265.62425156, 94906265.62425155)), MAX + 1.0);
    }
}
