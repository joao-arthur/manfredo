use super::Rect;
use crate::matrix::d2::point::point_i64::delta;

pub fn area(r: &Rect) -> u128 {
    let d = delta(&r.min, &r.max);
    u128::from(d.row) * u128::from(d.col)
}

#[cfg(test)]
mod tests {
    use super::area;
    use crate::matrix::d2::rect::rect_i64::Rect;

    #[test]
    fn test_area() {
        assert_eq!(area(&Rect::of(-5, 0, 0, 2)), 10);
        assert_eq!(area(&Rect::of(-50, 50, -30, 51)), 20);
        assert_eq!(area(&Rect::of(10, -30, 15, -20)), 50);
    }

    #[test]
    fn area_powers_of_10() {
        assert_eq!(area(&Rect::of(0, 0, 1, 1)), 1);
        assert_eq!(area(&Rect::of(-5, -5, 5, 5)), 100);
        assert_eq!(area(&Rect::of(-50, -50, 50, 50)), 10000);
        assert_eq!(area(&Rect::of(-500, -500, 500, 500)), 1000000);
        assert_eq!(area(&Rect::of(-5000, -5000, 5000, 5000)), 100000000);
        assert_eq!(area(&Rect::of(-50000, -50000, 50000, 50000)), 10000000000);
        assert_eq!(area(&Rect::of(-500000, -500000, 500000, 500000)), 1000000000000);
        assert_eq!(area(&Rect::of(-5000000, -5000000, 5000000, 5000000)), 100000000000000);
        assert_eq!(area(&Rect::of(-50000000, -50000000, 50000000, 50000000)), 10000000000000000);
        assert_eq!(area(&Rect::of(-500000000, -500000000, 500000000, 500000000)), 1000000000000000000);
        assert_eq!(area(&Rect::of(-5000000000, -5000000000, 5000000000, 5000000000)), 100000000000000000000);
        assert_eq!(area(&Rect::of(-50000000000, -50000000000, 50000000000, 50000000000)), 10000000000000000000000);
        assert_eq!(area(&Rect::of(-500000000000, -500000000000, 500000000000, 500000000000)), 1000000000000000000000000);
        assert_eq!(area(&Rect::of(-5000000000000, -5000000000000, 5000000000000, 5000000000000)), 100000000000000000000000000);
        assert_eq!(area(&Rect::of(-50000000000000, -50000000000000, 50000000000000, 50000000000000)), 10000000000000000000000000000);
        assert_eq!(area(&Rect::of(-500000000000000, -500000000000000, 500000000000000, 500000000000000)), 1000000000000000000000000000000);
        assert_eq!(area(&Rect::of(-5000000000000000, -5000000000000000, 5000000000000000, 5000000000000000)), 100000000000000000000000000000000);
        assert_eq!(area(&Rect::of(-50000000000000000, -50000000000000000, 50000000000000000, 50000000000000000)), 10000000000000000000000000000000000);
        assert_eq!(area(&Rect::of(-500000000000000000, -500000000000000000, 500000000000000000, 500000000000000000)), 1000000000000000000000000000000000000);
        assert_eq!(area(&Rect::of(-5000000000000000000, -5000000000000000000, 5000000000000000000, 5000000000000000000)), 100000000000000000000000000000000000000);
    }

    #[test]
    fn area_bounds() {
        assert_eq!(area(&Rect::of(0, 0, 0, 0)), 0);
        assert_eq!(area(&Rect::largest()), 340_282_366_920_938_463_426_481_119_284_349_108_225);
    }
}
